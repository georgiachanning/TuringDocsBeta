<!DOCTYPE html><HTML lang="en"><head><script charset="utf-8" src="../../../../assets/__default/flexsearch.bundle.js" type="text/javascript"></script><script charset="utf-8" src="../../../../assets/__default/flexsearch_integration.js" type="text/javascript"></script><meta charset="UTF-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>Diagnostics · MCMCChains.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script data-main="../assets/documenter.js" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" data-theme-name="documenter-dark" data-theme-primary-dark="" href="../assets/themes/documenter-dark.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="documenter-light" data-theme-primary="" href="../assets/themes/documenter-light.css" rel="stylesheet" type="text/css"/><script src="../assets/themeswap.js"></script><link href="../../../../assets/__default/multidoc.css" rel="stylesheet" type="text/css"/><link href="../../../../assets/__default/flexsearch.css" rel="stylesheet" type="text/css"/></head><body><nav id="multi-page-nav"><div class="hidden-on-mobile" id="nav-items"><a class="nav-link nav-item" href="../../../../tur/">Turing</a><a class="nav-link nav-item" href="../../../../ppl/">DynamicPPL</a><a class="nav-link nav-item" href="../../../../hmc/">AdvancedHMC</a><a class="nav-link nav-item" href="../../../../ns/">NestedSamplers</a><a class="nav-link active nav-item" href="../../../">MCMCChains</a><div class="search nav-item"><input id="search-input" placeholder="Search..."/><ul class="suggestions hidden" id="search-result-container"></ul><div class="search-keybinding">/</div></div></div><a id="multidoc-toggler"></a></nav><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">MCMCChains.jl</span></div><form action="../search/" class="docs-search"><input class="docs-search-query" id="documenter-search-query" name="q" placeholder="Search docs" type="text"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">MCMCChains</a></li><li><a class="tocitem" href="../getting-started/">Getting started</a></li><li><span class="tocitem">Plotting</span><ul><li><a class="tocitem" href="../statsplots/">StatsPlots.jl</a></li><li><a class="tocitem" href="../gadfly/">Gadfly.jl</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../chains/">Chains</a></li><li class="is-active"><a class="tocitem" href="">Diagnostics</a></li><li><a class="tocitem" href="../stats/">Posterior statistics</a></li><li><a class="tocitem" href="../modelstats/">Model selection</a></li><li><a class="tocitem" href="../summarize/">Summarize</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API</a></li><li class="is-active"><a href="">Diagnostics</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="">Diagnostics</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/TuringLang/MCMCChains.jl/blob/master/docs/src/diagnostics.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" href="#" id="documenter-settings-button" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" href="#" id="documenter-sidebar-button"></a></div></header><article class="content" id="documenter-page"><h1 id="Diagnostics"><a class="docs-heading-anchor" href="#Diagnostics">Diagnostics</a><a id="Diagnostics-1"></a><a class="docs-heading-anchor-permalink" href="#Diagnostics" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" href="#MCMCChains.discretediag-Tuple{Chains{var&quot;#s10&quot;, A, L, K, I} where {var&quot;#s10&quot;&lt;:Real, A&lt;:(AxisArrays.AxisArray{var&quot;#s10&quot;, 3, D, Ax} where {D, Ax}), L, K&lt;:NamedTuple, I&lt;:NamedTuple}}" id="MCMCChains.discretediag-Tuple{Chains{var&quot;#s10&quot;, A, L, K, I} where {var&quot;#s10&quot;&lt;:Real, A&lt;:(AxisArrays.AxisArray{var&quot;#s10&quot;, 3, D, Ax} where {D, Ax}), L, K&lt;:NamedTuple, I&lt;:NamedTuple}}"><code>MCMCChains.discretediag</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">discretediag(chains::Chains{&lt;:Real}; sections, frac, method, nsim)</code></pre><p>Discrete diagnostic where <code>method</code> can be  <code>[:weiss, :hangartner, :DARBOOT, MCBOOT, :billinsgley, :billingsleyBOOT]</code>.</p></div><a class="docs-sourcelink" href="https://github.com/TuringLang/MCMCChains.jl/blob/4697c123853a879f63a98c46064ebb71ec770778/src/discretediag.jl#L371-L376" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#MCMCChains.weiss-Tuple{AbstractMatrix{T} where T}" id="MCMCChains.weiss-Tuple{AbstractMatrix{T} where T}"><code>MCMCChains.weiss</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">weiss(X::AbstractMatrix)</code></pre><p>Assess the convergence of the MCMC chains with the Weiss procedure.</p><p>It computes <span>$\frac{X^2}{c}$</span> and evaluates a p-value from the <span>$\chi^2$</span> distribution with <span>$(|R| − 1)(s − 1)$</span> degrees of freedom.</p></div><a class="docs-sourcelink" href="https://github.com/TuringLang/MCMCChains.jl/blob/4697c123853a879f63a98c46064ebb71ec770778/src/discretediag.jl#L27-L33" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#MCMCChains.gelmandiag-Tuple{AbstractArray{var&quot;#s11&quot;, 3} where var&quot;#s11&quot;&lt;:Real}" id="MCMCChains.gelmandiag-Tuple{AbstractArray{var&quot;#s11&quot;, 3} where var&quot;#s11&quot;&lt;:Real}"><code>MCMCChains.gelmandiag</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">gelmandiag(chains::AbstractArray{&lt;:Real,3}; kwargs...)</code></pre><p>Gelman, Rubin and Brooks diagnostics.</p></div><a class="docs-sourcelink" href="https://github.com/TuringLang/MCMCChains.jl/blob/4697c123853a879f63a98c46064ebb71ec770778/src/gelmandiag.jl#L56-L60" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#MCMCChains.gelmandiag_multivariate-Tuple{AbstractArray{var&quot;#s10&quot;, 3} where var&quot;#s10&quot;&lt;:Real}" id="MCMCChains.gelmandiag_multivariate-Tuple{AbstractArray{var&quot;#s10&quot;, 3} where var&quot;#s10&quot;&lt;:Real}"><code>MCMCChains.gelmandiag_multivariate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">gelmandiag_multivariate(chains::AbstractArray{&lt;:Real,3}; kwargs...)</code></pre><p>Multivariate Gelman, Rubin and Brooks diagnostics.</p></div><a class="docs-sourcelink" href="https://github.com/TuringLang/MCMCChains.jl/blob/4697c123853a879f63a98c46064ebb71ec770778/src/gelmandiag.jl#L67-L71" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#MCMCChains.gewekediag-Tuple{Vector{var&quot;#s12&quot;} where var&quot;#s12&quot;&lt;:Real}" id="MCMCChains.gewekediag-Tuple{Vector{var&quot;#s12&quot;} where var&quot;#s12&quot;&lt;:Real}"><code>MCMCChains.gewekediag</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">gewekediag(x::Vector{&lt;:Real}; first, last, etype)
gewekediag(chains::Chains; sections, first, last, etype, kwargs...)</code></pre><p>Geweke diagnostic.</p></div><a class="docs-sourcelink" href="https://github.com/TuringLang/MCMCChains.jl/blob/4697c123853a879f63a98c46064ebb71ec770778/src/gewekediag.jl#L3-L8" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#MCMCChains.heideldiag-Tuple{Vector{var&quot;#s12&quot;} where var&quot;#s12&quot;&lt;:Real}" id="MCMCChains.heideldiag-Tuple{Vector{var&quot;#s12&quot;} where var&quot;#s12&quot;&lt;:Real}"><code>MCMCChains.heideldiag</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">heideldiag(x::Vector{&lt;:Real}; alpha, eps, etype, start, args...)
heideldiag(chains::Chains; sections, alpha, eps, etype, args...)</code></pre><p>Heidelberger and Welch Diagnostic.</p></div><a class="docs-sourcelink" href="https://github.com/TuringLang/MCMCChains.jl/blob/4697c123853a879f63a98c46064ebb71ec770778/src/heideldiag.jl#L3-L8" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#MCMCChains.rafterydiag-Tuple{Vector{var&quot;#s9&quot;} where var&quot;#s9&quot;&lt;:Real}" id="MCMCChains.rafterydiag-Tuple{Vector{var&quot;#s9&quot;} where var&quot;#s9&quot;&lt;:Real}"><code>MCMCChains.rafterydiag</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">rafterydiag(x::Vector{&lt;:Real}; q, r, s, eps, range)
rafterydiag(chains::Chains; sections, q, r, s, eps)</code></pre><p>Raftery and Lewis Diagnostic.</p></div><a class="docs-sourcelink" href="https://github.com/TuringLang/MCMCChains.jl/blob/4697c123853a879f63a98c46064ebb71ec770778/src/rafterydiag.jl#L3-L8" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#MCMCChains.rstar-Tuple{Random.AbstractRNG, MLJModelInterface.Supervised, AbstractMatrix{T} where T, AbstractVector{Int64}}" id="MCMCChains.rstar-Tuple{Random.AbstractRNG, MLJModelInterface.Supervised, AbstractMatrix{T} where T, AbstractVector{Int64}}"><code>MCMCChains.rstar</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">rstar([rng ,]classif::Supervised, chains::Chains; kwargs...)
rstar([rng ,]classif::Supervised, x::AbstractMatrix, y::AbstractVector; kwargs...)</code></pre><p>Compute the <span>$R^*$</span> convergence diagnostic of MCMC.</p><p>This implementation is an adaption of Algorithm 1 &amp; 2, described by <sup class="footnote-reference"><a href="#footnote-LambertVehtari2020" id="citeref-LambertVehtari2020">[LambertVehtari2020]</a></sup>. Note that the correctness of the statistic depends on the convergence of the classifier used internally in the statistic. You can inspect the training of the classifier by adjusting the verbosity level.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>subset = 0.8</code> ... Subset used to train the classifier, i.e. 0.8 implies 80% of the samples are used.</li><li><code>iterations = 10</code> ... Number of iterations used to estimate the statistic. If the classifier is not probabilistic, i.e. does not return class probabilities, it is advisable to use a value of one.</li><li><code>verbosity = 0</code> ... Verbosity level used during fitting of the classifier.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia">using MLJModels

XGBoost = @load XGBoostClassifier verbosity=0
chn = Chains(fill(4, 100, 2, 3))

Rs = rstar(XGBoost(), chn; iterations=20)
R = round(mean(Rs); digits=0)</code></pre></div><a class="docs-sourcelink" href="https://github.com/TuringLang/MCMCChains.jl/blob/4697c123853a879f63a98c46064ebb71ec770778/src/rstar.jl#L1-L33" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#MCMCChains.BDAESSMethod" id="MCMCChains.BDAESSMethod"><code>MCMCChains.BDAESSMethod</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">BDAESSMethod &lt;: AbstractESSMethod</code></pre><p>The <code>BDAESSMethod</code> uses a standard algorithm for estimating the effective sample size of MCMC chains.</p><p>It is is based on the discussion by <sup class="footnote-reference"><a href="#footnote-Vehtari2019" id="citeref-Vehtari2019">[Vehtari2019]</a></sup> and uses the variogram estimator of the autocorrelation function discussed in <sup class="footnote-reference"><a href="#footnote-Gelman2013" id="citeref-Gelman2013">[Gelman2013]</a></sup>.</p></div><a class="docs-sourcelink" href="https://github.com/TuringLang/MCMCChains.jl/blob/4697c123853a879f63a98c46064ebb71ec770778/src/ess.jl#L37-L47" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#MCMCChains.ESSMethod" id="MCMCChains.ESSMethod"><code>MCMCChains.ESSMethod</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">ESSMethod &lt;: AbstractESSMethod</code></pre><p>The <code>ESSMethod</code> uses a standard algorithm for estimating the effective sample size of MCMC chains.</p><p>It is is based on the discussion by <sup class="footnote-reference"><a href="#footnote-Vehtari2019" id="citeref-Vehtari2019">[Vehtari2019]</a></sup> and uses the biased estimator of the autocovariance, as discussed by <sup class="footnote-reference"><a href="#footnote-Geyer1992" id="citeref-Geyer1992">[Geyer1992]</a></sup>. In contrast to Geyer, the divisor <code>n - 1</code> is used in the estimation of the autocovariance to obtain the unbiased estimator of the variance for lag 0.</p></div><a class="docs-sourcelink" href="https://github.com/TuringLang/MCMCChains.jl/blob/4697c123853a879f63a98c46064ebb71ec770778/src/ess.jl#L4-L18" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#MCMCChains.FFTESSMethod" id="MCMCChains.FFTESSMethod"><code>MCMCChains.FFTESSMethod</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">FFTESSMethod &lt;: AbstractESSMethod</code></pre><p>The <code>FFTESSMethod</code> uses a standard algorithm for estimating the effective sample size of MCMC chains.</p><p>It is is based on the discussion by <sup class="footnote-reference"><a href="#footnote-Vehtari2019" id="citeref-Vehtari2019">[Vehtari2019]</a></sup> and uses the biased estimator of the autocovariance, as discussed by <sup class="footnote-reference"><a href="#footnote-Geyer1992" id="citeref-Geyer1992">[Geyer1992]</a></sup>. In contrast to Geyer, the divisor <code>n - 1</code> is used in the estimation of the autocovariance to obtain the unbiased estimator of the variance for lag 0.</p><p>In contrast to <a href="#MCMCChains.ESSMethod"><code>ESSMethod</code></a>, this method uses fast Fourier transforms (FFTs) for estimating the autocorrelation.</p></div><a class="docs-sourcelink" href="https://github.com/TuringLang/MCMCChains.jl/blob/4697c123853a879f63a98c46064ebb71ec770778/src/ess.jl#L21-L34" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#MCMCChains.copyto_split!-Tuple{AbstractMatrix{T} where T, AbstractMatrix{T} where T}" id="MCMCChains.copyto_split!-Tuple{AbstractMatrix{T} where T, AbstractMatrix{T} where T}"><code>MCMCChains.copyto_split!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">copyto_split!(out::AbstractMatrix, x::AbstractMatrix)</code></pre><p>Copy the elements of matrix <code>x</code> to matrix <code>out</code>, in which each column of <code>x</code> is split.</p><p>If the number of rows in <code>x</code> is odd, the sample at index <code>(size(x, 1) + 1) / 2</code> is dropped.</p></div><a class="docs-sourcelink" href="https://github.com/TuringLang/MCMCChains.jl/blob/4697c123853a879f63a98c46064ebb71ec770778/src/ess.jl#L324-L330" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#MCMCChains.ess-Tuple{Chains}" id="MCMCChains.ess-Tuple{Chains}"><code>MCMCChains.ess</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">ess(chains::Chains; kwargs...)</code></pre><p>Estimate the effective sample size and the potential scale reduction.</p></div><a class="docs-sourcelink" href="https://github.com/TuringLang/MCMCChains.jl/blob/4697c123853a879f63a98c46064ebb71ec770778/src/ess.jl#L198-L202" target="_blank">source</a></section></article><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-LambertVehtari2020"><a class="tag is-link" href="#citeref-LambertVehtari2020">LambertVehtari2020</a>Lambert &amp; Vehtari (2020). <span>$R^*$</span>: A robust MCMC convergence diagnostic with uncertainty using gradient-boosted machines. arXiv preprint <a href="https://arxiv.org/abs/2003.07900">https://arxiv.org/abs/2003.07900</a>.</li><li class="footnote" id="footnote-Gelman2013"><a class="tag is-link" href="#citeref-Gelman2013">Gelman2013</a>Gelman, A., Carlin, J. B., Stern, H. S., Dunson, D. B., Vehtari, A., &amp; Rubin, D. B. (2013). Bayesian data analysis. CRC press.</li><li class="footnote" id="footnote-Geyer1992"><a class="tag is-link" href="#citeref-Geyer1992">Geyer1992</a>Geyer, C. J. (1992). Practical Markov Chain Monte Carlo. Statistical Science, 473-483. <a href="https://projecteuclid.org/euclid.ss/1177011137">https://projecteuclid.org/euclid.ss/1177011137</a>.</li><li class="footnote" id="footnote-Vehtari2019"><a class="tag is-link" href="#citeref-Vehtari2019">Vehtari2019</a>Vehtari, A., Gelman, A., Simpson, D., Carpenter, B., &amp; Bürkner, P. C. (2021). Rank-normalization, folding, and localization: An improved <span>$\widehat {R}$</span> for assessing convergence of MCMC. Bayesian Analysis. <a href="https://arxiv.org/pdf/1903.08008.pdf">https://arxiv.org/pdf/1903.08008.pdf</a>.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../chains/">« Chains</a><a class="docs-footer-nextpage" href="../stats/">Posterior statistics »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label></p><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div><p></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 23 April 2021 07:21">Friday 23 April 2021</span>. Using Julia version 1.6.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></HTML>